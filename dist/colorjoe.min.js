!function(a,b){"object"==typeof exports?module.exports=b():"function"==typeof define&&define.amd?define(b):a.colorjoe=b()}(this,function(){function a(b){if("[object Array]"===Object.prototype.toString.apply(b)){if("string"==typeof b[0]&&"function"==typeof a[b[0]])return new a[b[0]](b.slice(1,b.length));if(4===b.length)return new a.RGB(b[0]/255,b[1]/255,b[2]/255,b[3]/255)}else if("string"==typeof b){var c=b.toLowerCase();G[c]&&(b="#"+G[c]),"transparent"===c&&(b="rgba(0,0,0,0)");var d=b.match(K);if(d){var e=d[1].toUpperCase(),f=H(d[8])?d[8]:parseFloat(d[8]),g="H"===e[0],h=d[3]?100:g?360:255,i=d[5]||g?100:255,j=d[7]||g?100:255;if(H(a[e]))throw new Error("one.color."+e+" is not installed.");return new a[e](parseFloat(d[2])/h,parseFloat(d[4])/i,parseFloat(d[6])/j,f)}b.length<6&&(b=b.replace(/^#?([0-9a-f])([0-9a-f])([0-9a-f])$/i,"$1$1$2$2$3$3"));var k=b.match(/^#?([0-9a-f][0-9a-f])([0-9a-f][0-9a-f])([0-9a-f][0-9a-f])$/i);if(k)return new a.RGB(parseInt(k[1],16)/255,parseInt(k[2],16)/255,parseInt(k[3],16)/255)}else if("object"==typeof b&&b.isColor)return b;return!1}function b(b,c,d){function e(b,c){var d={};d[c.toLowerCase()]=new Function("return this.rgb()."+c.toLowerCase()+"();"),a[c].propertyNames.forEach(function(a){d[a]=d["black"===a?"k":a[0]]=new Function("value","isDelta","return this."+c.toLowerCase()+"()."+a+"(value, isDelta);")});for(var e in d)d.hasOwnProperty(e)&&void 0===a[b].prototype[e]&&(a[b].prototype[e]=d[e])}a[b]=new Function(c.join(","),"if (Object.prototype.toString.apply("+c[0]+") === '[object Array]') {"+c.map(function(a,b){return a+"="+c[0]+"["+b+"];"}).reverse().join("")+"}"+"if ("+c.filter(function(a){return"alpha"!==a}).map(function(a){return"isNaN("+a+")"}).join("||")+"){"+'throw new Error("['+b+']: Invalid color: ("+'+c.join('+","+')+'+")");}'+c.map(function(a){return"hue"===a?"this._hue=hue<0?hue-Math.floor(hue):hue%1":"alpha"===a?"this._alpha=(isNaN(alpha)||alpha>1)?1:(alpha<0?0:alpha);":"this._"+a+"="+a+"<0?0:("+a+">1?1:"+a+")"}).join(";")+";"),a[b].propertyNames=c;var f=a[b].prototype;["valueOf","hex","hexa","css","cssa"].forEach(function(a){f[a]=f[a]||("RGB"===b?f.hex:new Function("return this.rgb()."+a+"();"))}),f.isColor=!0,f.equals=function(a,d){H(d)&&(d=1e-10),a=a[b.toLowerCase()]();for(var e=0;e<c.length;e+=1)if(Math.abs(this["_"+c[e]]-a["_"+c[e]])>d)return!1;return!0},f.toJSON=new Function("return ['"+b+"', "+c.map(function(a){return"this._"+a},this).join(", ")+"];");for(var g in d)if(d.hasOwnProperty(g)){var h=g.match(/^from(.*)$/);h?a[h[1].toUpperCase()].prototype[b.toLowerCase()]=d[g]:f[g]=d[g]}f[b.toLowerCase()]=function(){return this},f.toString=new Function('return "[one.color.'+b+':"+'+c.map(function(a,b){return'" '+c[b]+'="+this._'+a}).join("+")+'+"]";'),c.forEach(function(a){f[a]=f["black"===a?"k":a[0]]=new Function("value","isDelta","if (typeof value === 'undefined') {return this._"+a+";"+"}"+"if (isDelta) {"+"return new this.constructor("+c.map(function(b){return"this._"+b+(a===b?"+value":"")}).join(", ")+");"+"}"+"return new this.constructor("+c.map(function(b){return a===b?"value":"this._"+b}).join(", ")+");")}),F.forEach(function(a){e(b,a),e(a,b)}),F.push(b)}function c(){var b=this.rgb(),c=.3*b._red+.59*b._green+.11*b._blue;return new a.RGB(c,c,c,this._alpha)}function d(a,b,c){var d=document.createElement(a);return d.className=b,c.appendChild(d),d}function e(a){var b=Array.prototype.slice,c=b.apply(arguments,[1]);return function(){return a.apply(null,c.concat(b.apply(arguments)))}}function f(a,b,c,d){var e=L(a,c),f=g(b,e),i=h("text",e,d);return{label:f,input:i}}function g(a,b){var c=d("label","",b);return c.innerHTML=a,c}function h(a,b,c){var e=d("input","",b);return e.type=a,c&&(e.maxLength=c),e}function i(a,b){a.style.left=l(100*b,0,100)+"%"}function j(a,b){a.style.top=l(100*b,0,100)+"%"}function k(a,b){a.style.background=b}function l(a,b,c){return Math.min(Math.max(a,b),c)}function m(a){var b=M.div("currentColorContainer",a),c=M.div("currentColor",b);return{change:function(a){M.BG(c,a.cssa())}}}function n(a,b,c){function d(){var a=[e];l.forEach(function(b){a.push(b.e.input.value/f)}),j||a.push(b.getAlpha()),b.set(a)}var e=c.space,f=c.limit||255,g=c.fix>=0?c.fix:0,h=(""+f).length+g;h=g?h+1:h;var i=e.split(""),j="A"==e[e.length-1];if(e=j?e.slice(0,-1):e,["RGB","HSL","HSV","CMYK"].indexOf(e)<0)return console.warn("Invalid field names",e);var k=M.div("colorFields",a),l=i.map(function(a){a=a.toLowerCase();var b=M.labelInput("color "+a,a,k,h);return b.input.onkeyup=d,{name:a,e:b}});return{change:function(a){l.forEach(function(b){b.e.input.value=(a[b.name]()*f).toFixed(g)})}}}function o(a,b){function c(a){var c=M.clamp(a.y,0,1);M.Y(a.pointer,c),b.setAlpha(1-c)}var d=E.slider({parent:a,"class":"oned alpha",cbs:{begin:c,change:c}});return{change:function(a){M.Y(d.pointer,1-a.alpha())}}}function p(a,b,c){var d=M.labelInput("hex",c.label||"",a,7);return d.input.value="#",d.input.onkeyup=function(a){var c=a.keyCode||a.which,d=a.target.value;d="#"==d[0]?d:"#"+d,d=r(d,7,"0"),13==c&&b.set(d)},d.input.onblur=function(a){b.set(a.target.value)},{change:function(a){d.input.value="#"==d.input.value[0]?"#":"",d.input.value+=a.hex().slice(1)}}}function q(a,b,c){var d=M.e("a",c["class"]||"close",a);d.href="#",d.innerHTML=c.label||"Close",d.onclick=function(a){a.preventDefault(),b.hide()}}function r(a,b,c){for(var d=a,e=a.length;b>e;e++)d+=c;return d}function s(a,b){M.BG(a,new P.HSV(b,1,1).cssa())}function t(a){function b(a){k=g.xy(k,{x:M.clamp(a.x,0,1),y:M.clamp(a.y,0,1)},h,i),d()}function c(a){k=g.z(k,M.clamp(a.y,0,1),h,i),d()}function d(a){a=z(a)?a:[];for(var b,c=l.change,d=0,e=c.length;e>d;d++)b=c[d],-1==a.indexOf(b.name)&&b.fn(k)}function e(){if(!j.equals(k)){for(var a=0,b=l.done.length;b>a;a++)l.done[a].fn(k);j=k}}if(!a.e)return console.warn("colorjoe: missing element");var f=A(a.e)?document.getElementById(a.e):a.e;f.className="colorPicker";var g=a.cbs,h=E.xyslider({parent:f,"class":"twod",cbs:{begin:b,change:b,end:e}}),i=E.slider({parent:f,"class":"oned",cbs:{begin:c,change:c,end:e}}),j=u(a.color),k=g.init(j,h,i),l={change:[],done:[]},m={e:f,update:function(a){return d(a),this},hide:function(){return f.style.display="none",this},show:function(){return f.style.display="",this},get:function(){return k},set:function(a){var b=this.get();return k=g.init(u(a),h,i),b.equals(k)||this.update(),this},getAlpha:function(){return k.alpha()},setAlpha:function(a){return k=k.alpha(a),this.update(),this},on:function(a,b,c){return"change"==a||"done"==a?l[a].push({name:c,fn:b}):console.warn('Passed invalid evt name "'+a+'" to colorjoe.on'),this},removeAllListeners:function(a){if(a)delete l[a];else for(var b in l)delete l[b];return this}};return v(f,m,a.extras),d(),m}function u(a){if(!B(a))return P("black");if(a.isColor)return a;var b=P(a);return b?b:(B(a)&&console.warn("Passed invalid color to colorjoe, using black instead"),P("black"))}function v(a,b,c){if(c){var d,e,f,g=M.div("extras",a);c.forEach(function(a,c){if(z(a)?(e=a[0],f=a.length>1?a[1]:{}):(e=a,f={}),extra=e in O._extras?O._extras[e]:null){d=extra(g,w(b,e+c),f);for(var h in d)b.on(h,d[h],e)}})}}function w(a,b){var c=x(a);return c.update=function(){a.update([b])},c}function x(a){var b={};for(var c in a)b[c]=a[c];return b}function y(a,b){return b.map(a).filter(D).length==b.length}function z(a){return"[object Array]"===Object.prototype.toString.call(a)}function A(a){return"string"==typeof a}function B(a){return"undefined"!=typeof a}function C(a){return"function"==typeof a}function D(a){return a}var E=function(){function a(a,b){return a?(g()?h(a,b,"touchstart","touchmove","touchend"):h(a,b,"mousedown","mousemove","mouseup"),void 0):(console.warn("drag is missing elem!"),void 0)}function b(b){var c=e(b["class"]||"",b.parent),f=e("pointer",c);return e("shape shape1",f),e("shape shape2",f),e("bg bg1",c),e("bg bg2",c),a(c,d(b.cbs,f)),{background:c,pointer:f}}function c(b){var c=e(b["class"],b.parent),f=e("pointer",c);return e("shape",f),e("bg",c),a(c,d(b.cbs,f)),{background:c,pointer:f}}function d(a,b){function c(a){return function(c){c.pointer=b,a(c)}}var d={};for(var e in a)d[e]=c(a[e]);return d}function e(a,b){return f("div",a,b)}function f(a,b,c){var d=document.createElement(a);return b&&(d.className=b),c.appendChild(d),d}function g(){return"undefined"!=typeof window.ontouchstart}function h(a,b,c,d,e){var f=!1;b=k(b);var g=b.begin,h=b.change,l=b.end;i(a,c,function(b){function c(){f=!1,j(document,d,k),j(document,e,c),n(l,a,b)}f=!0;var k=o(n,h,a);i(document,d,k),i(document,e,c),n(g,a,b)})}function i(a,b,c){a.addEventListener?a.addEventListener(b,c,!1):a.attachEvent&&a.attachEvent("on"+b,c)}function j(a,b,c){a.removeEventListener?a.removeEventListener(b,c,!1):a.detachEvent&&a.detachEvent("on"+b,c)}function k(a){if(a)return{begin:a.begin||m,change:a.change||m,end:a.end||m};var b,c;return{begin:function(a){b={x:a.elem.offsetLeft,y:a.elem.offsetTop},c=a.cursor},change:function(a){l(a.elem,"left",b.x+a.cursor.x-c.x+"px"),l(a.elem,"top",b.y+a.cursor.y-c.y+"px")},end:m}}function l(a,b,c){a.style[b]=c}function m(){}function n(a,b,c){c.preventDefault();var d=p(b),e=b.clientWidth,f=b.clientHeight,g={x:q(b,c),y:r(b,c)},h=(g.x-d.x)/e,i=(g.y-d.y)/f;a({x:isNaN(h)?0:h,y:isNaN(i)?0:i,cursor:g,elem:b,e:c})}function o(a){var b=Array.prototype.slice,c=b.apply(arguments,[1]);return function(){return a.apply(null,c.concat(b.apply(arguments)))}}function p(a){var b=0,c=0;if(a.offsetParent)do b+=a.offsetLeft,c+=a.offsetTop;while(a=a.offsetParent);return{x:b,y:c}}function q(a,b){if(t(a)){var c=parseInt(u(document.body,"marginLeft"),10)-s(a,"scrollLeft")+window.pageXOffset+a.style.marginLeft;return b.clientX-c}return b.pageX?b.pageX:b.clientX?b.clientX+document.body.scrollLeft:void 0}function r(a,b){if(t(a)){var c=parseInt(u(document.body,"marginTop"),10)-s(a,"scrollTop")+window.pageYOffset+a.style.marginTop;return b.clientY-c}return b.pageY?b.pageY:b.clientY?b.clientY+document.body.scrollTop:void 0}function s(a,b){for(var c=0;"HTML"!=a.nodeName;)c+=a[b],a=a.parentNode;return c}function t(a){for(;"HTML"!=a.nodeName&&"fixed"!=v(a,"position");)a=a.parentNode;return"HTML"==a.nodeName?!1:!0}function u(a,b){return a.currentStyle?a.currentStyle[b]:document.defaultView&&document.defaultView.getComputedStyle?document.defaultView.getComputedStyle(a,"")[b]:a.style[b]}function v(a,b){var c;return c=window.getComputedStyle?window.getComputedStyle(a,null):a.currentStyle,c[b]}return a.xyslider=b,a.slider=c,a}(),F=[],G={},H=function(a){return"undefined"==typeof a},I=/\s*(\.\d+|\d+(?:\.\d+)?)(%)?\s*/,J=/\s*(\.\d+|\d+(?:\.\d+)?)\s*/,K=new RegExp("^(rgb|hsl|hsv)a?\\("+I.source+","+I.source+","+I.source+"(?:,"+J.source+")?"+"\\)$","i");a.installMethod=function(b,c){F.forEach(function(d){a[d].prototype[b]=c})},b("RGB",["red","green","blue","alpha"],{hex:function(){var a=(65536*Math.round(255*this._red)+256*Math.round(255*this._green)+Math.round(255*this._blue)).toString(16);return"#"+"00000".substr(0,6-a.length)+a},hexa:function(){var a=Math.round(255*this._alpha).toString(16);return"#"+"00".substr(0,2-a.length)+a+this.hex().substr(1,6)},css:function(){return"rgb("+Math.round(255*this._red)+","+Math.round(255*this._green)+","+Math.round(255*this._blue)+")"},cssa:function(){return"rgba("+Math.round(255*this._red)+","+Math.round(255*this._green)+","+Math.round(255*this._blue)+","+this._alpha+")"}}),"undefined"!=typeof module?module.exports=a:"function"!=typeof define||H(define.amd)?"undefined"!=typeof jQuery&&H(jQuery.color)?jQuery.color=a:(one=window.one||{},one.color=a):define([],function(){return a}),G={aliceblue:"f0f8ff",antiquewhite:"faebd7",aqua:"0ff",aquamarine:"7fffd4",azure:"f0ffff",beige:"f5f5dc",bisque:"ffe4c4",black:"000",blanchedalmond:"ffebcd",blue:"00f",blueviolet:"8a2be2",brown:"a52a2a",burlywood:"deb887",cadetblue:"5f9ea0",chartreuse:"7fff00",chocolate:"d2691e",coral:"ff7f50",cornflowerblue:"6495ed",cornsilk:"fff8dc",crimson:"dc143c",cyan:"0ff",darkblue:"00008b",darkcyan:"008b8b",darkgoldenrod:"b8860b",darkgray:"a9a9a9",darkgrey:"a9a9a9",darkgreen:"006400",darkkhaki:"bdb76b",darkmagenta:"8b008b",darkolivegreen:"556b2f",darkorange:"ff8c00",darkorchid:"9932cc",darkred:"8b0000",darksalmon:"e9967a",darkseagreen:"8fbc8f",darkslateblue:"483d8b",darkslategray:"2f4f4f",darkslategrey:"2f4f4f",darkturquoise:"00ced1",darkviolet:"9400d3",deeppink:"ff1493",deepskyblue:"00bfff",dimgray:"696969",dimgrey:"696969",dodgerblue:"1e90ff",firebrick:"b22222",floralwhite:"fffaf0",forestgreen:"228b22",fuchsia:"f0f",gainsboro:"dcdcdc",ghostwhite:"f8f8ff",gold:"ffd700",goldenrod:"daa520",gray:"808080",grey:"808080",green:"008000",greenyellow:"adff2f",honeydew:"f0fff0",hotpink:"ff69b4",indianred:"cd5c5c",indigo:"4b0082",ivory:"fffff0",khaki:"f0e68c",lavender:"e6e6fa",lavenderblush:"fff0f5",lawngreen:"7cfc00",lemonchiffon:"fffacd",lightblue:"add8e6",lightcoral:"f08080",lightcyan:"e0ffff",lightgoldenrodyellow:"fafad2",lightgray:"d3d3d3",lightgrey:"d3d3d3",lightgreen:"90ee90",lightpink:"ffb6c1",lightsalmon:"ffa07a",lightseagreen:"20b2aa",lightskyblue:"87cefa",lightslategray:"789",lightslategrey:"789",lightsteelblue:"b0c4de",lightyellow:"ffffe0",lime:"0f0",limegreen:"32cd32",linen:"faf0e6",magenta:"f0f",maroon:"800000",mediumaquamarine:"66cdaa",mediumblue:"0000cd",mediumorchid:"ba55d3",mediumpurple:"9370d8",mediumseagreen:"3cb371",mediumslateblue:"7b68ee",mediumspringgreen:"00fa9a",mediumturquoise:"48d1cc",mediumvioletred:"c71585",midnightblue:"191970",mintcream:"f5fffa",mistyrose:"ffe4e1",moccasin:"ffe4b5",navajowhite:"ffdead",navy:"000080",oldlace:"fdf5e6",olive:"808000",olivedrab:"6b8e23",orange:"ffa500",orangered:"ff4500",orchid:"da70d6",palegoldenrod:"eee8aa",palegreen:"98fb98",paleturquoise:"afeeee",palevioletred:"d87093",papayawhip:"ffefd5",peachpuff:"ffdab9",peru:"cd853f",pink:"ffc0cb",plum:"dda0dd",powderblue:"b0e0e6",purple:"800080",red:"f00",rosybrown:"bc8f8f",royalblue:"4169e1",saddlebrown:"8b4513",salmon:"fa8072",sandybrown:"f4a460",seagreen:"2e8b57",seashell:"fff5ee",sienna:"a0522d",silver:"c0c0c0",skyblue:"87ceeb",slateblue:"6a5acd",slategray:"708090",slategrey:"708090",snow:"fffafa",springgreen:"00ff7f",steelblue:"4682b4",tan:"d2b48c",teal:"008080",thistle:"d8bfd8",tomato:"ff6347",turquoise:"40e0d0",violet:"ee82ee",wheat:"f5deb3",white:"fff",whitesmoke:"f5f5f5",yellow:"ff0",yellowgreen:"9acd32"},b("XYZ",["x","y","z","alpha"],{fromRgb:function(){var b=function(a){return 100*(a>.04045?Math.pow((a+.055)/1.055,2.4):a/12.92)},c=b(this._red),d=b(this._green),e=b(this._blue);return new a.XYZ(.4124*c+.3576*d+.1805*e,.2126*c+.7152*d+.0722*e,.0193*c+.1192*d+.9505*e,this._alpha)},rgb:function(){var b=this._x/100,c=this._y/100,d=this._z/100,e=function(a){return a>.0031308?1.055*Math.pow(a,1/2.4)-.055:12.92*a};return new a.RGB(e(3.2406*b+-1.5372*c+d*-.4986),e(b*-.9689+1.8758*c+.0415*d),e(.0557*b+c*-.204+1.057*d),this._alpha)},lab:function(){var b=function(a){return a>.008856?Math.pow(a,1/3):7.787037*a+4/29},c=b(this._x/95.047),d=b(this._y/100),e=b(this._z/108.883);return new a.LAB(116*d-16,500*(c-d),200*(d-e),this._alpha)}}),b("LAB",["l","a","b","alpha"],{fromRgb:function(){return this.xyz().lab()},rgb:function(){return this.xyz().rgb()},xyz:function(){var b=function(a){var b=Math.pow(a,3);return b>.008856?b:(a-16/116)/7.87},c=(this._l+16)/116,d=this._a/500+c,e=c-this._b/200;return new a.XYZ(95.047*b(d),100*b(c),108.883*b(e),this._alpha)}}),b("HSV",["hue","saturation","value","alpha"],{rgb:function(){var b,c,d,e=this._hue,f=this._saturation,g=this._value,h=Math.min(5,Math.floor(6*e)),i=6*e-h,j=g*(1-f),k=g*(1-i*f),l=g*(1-(1-i)*f);switch(h){case 0:b=g,c=l,d=j;break;case 1:b=k,c=g,d=j;break;case 2:b=j,c=g,d=l;break;case 3:b=j,c=k,d=g;break;case 4:b=l,c=j,d=g;break;case 5:b=g,c=j,d=k}return new a.RGB(b,c,d,this._alpha)},hsl:function(){var b,c=(2-this._saturation)*this._value,d=this._saturation*this._value,e=1>=c?c:2-c;return b=1e-9>e?0:d/e,new a.HSL(this._hue,b,c/2,this._alpha)},fromRgb:function(){var b,c=this._red,d=this._green,e=this._blue,f=Math.max(c,d,e),g=Math.min(c,d,e),h=f-g,i=0===f?0:h/f,j=f;if(0===h)b=0;else switch(f){case c:b=(d-e)/h/6+(e>d?1:0);break;case d:b=(e-c)/h/6+1/3;break;case e:b=(c-d)/h/6+2/3}return new a.HSV(b,i,j,this._alpha)}}),b("HSL",["hue","saturation","lightness","alpha"],{hsv:function(){var b,c=2*this._lightness,d=this._saturation*(1>=c?c:2-c);return b=1e-9>c+d?0:2*d/(c+d),new a.HSV(this._hue,b,(c+d)/2,this._alpha)},rgb:function(){return this.hsv().rgb()},fromRgb:function(){return this.hsv().hsl()}}),b("CMYK",["cyan","magenta","yellow","black","alpha"],{rgb:function(){return new a.RGB(1-this._cyan*(1-this._black)-this._black,1-this._magenta*(1-this._black)-this._black,1-this._yellow*(1-this._black)-this._black,this._alpha)},fromRgb:function(){var b=this._red,c=this._green,d=this._blue,e=1-b,f=1-c,g=1-d,h=1;return b||c||d?(h=Math.min(e,Math.min(f,g)),e=(e-h)/(1-h),f=(f-h)/(1-h),g=(g-h)/(1-h)):h=1,new a.CMYK(e,f,g,h,this._alpha)}}),a.installMethod("clearer",function(a){return this.alpha(isNaN(a)?-.1:-a,!0)}),a.installMethod("darken",function(a){return this.lightness(isNaN(a)?-.1:-a,!0)}),a.installMethod("desaturate",function(a){return this.saturation(isNaN(a)?-.1:-a,!0)}),a.installMethod("greyscale",c),a.installMethod("grayscale",c),a.installMethod("lighten",function(a){return this.lightness(isNaN(a)?.1:a,!0)}),a.installMethod("mix",function(b,c){b=a(b).rgb(),c=1-(isNaN(c)?.5:c);var d=2*c-1,e=this._alpha-b._alpha,f=((-1===d*e?d:(d+e)/(1+d*e))+1)/2,g=1-f,h=this.rgb();return new a.RGB(h._red*f+b._red*g,h._green*f+b._green*g,h._blue*f+b._blue*g,h._alpha*c+b._alpha*(1-c))}),a.installMethod("negate",function(){var b=this.rgb();return new a.RGB(1-b._red,1-b._green,1-b._blue,this._alpha)}),a.installMethod("opaquer",function(a){return this.alpha(isNaN(a)?.1:a,!0)}),a.installMethod("rotate",function(a){return this.hue((a||0)/360,!0)}),a.installMethod("saturate",function(a){return this.saturation(isNaN(a)?.1:a,!0)}),a.installMethod("toAlpha",function(b){var c=this.rgb(),d=a(b).rgb(),e=1e-10,f=new a.RGB(0,0,0,c._alpha),g=["_red","_green","_blue"];return g.forEach(function(a){f[a]=c[a]<e?c[a]:c[a]>d[a]?(c[a]-d[a])/(1-d[a]):c[a]>d[a]?(d[a]-c[a])/d[a]:0}),c._alpha=f._red>f._green?f._red>f._blue?f._red:f._blue:f._green>f._blue?f._green:f._blue,c._alpha<e?c:(g.forEach(function(a){c[a]=(c[a]-d[a])/c._alpha+d[a]}),c._alpha*=f._alpha,c)});var L=e(d,"div"),M={clamp:l,e:d,div:L,partial:e,labelInput:f,X:i,Y:j,BG:k},N={currentColor:m,fields:n,hex:p,alpha:o,close:q},O=function(a){return y(C,[a.init,a.xy,a.z])?function(b,c,d){return t({e:b,color:c,cbs:a,extras:d})}:console.warn("colorjoe: missing cb")},P=a;O.rgb=O({init:function(a,b,c){var d=P(a).hsl();return this.xy(d,{x:d.saturation(),y:1-d.value()},b,c),this.z(d,d.hue(),b,c),d},xy:function(a,b,c){return M.X(c.pointer,b.x),M.Y(c.pointer,b.y),a.saturation(b.x).value(1-b.y)},z:function(a,b,c,d){return M.Y(d.pointer,b),s(c.background,b),a.hue(b)}}),O.hsl=O({init:function(a,b,c){var d=P(a).hsl();return this.xy(d,{x:d.hue(),y:1-d.saturation()},b,c),this.z(d,1-d.lightness(),b,c),d},xy:function(a,b,c,d){return M.X(c.pointer,b.x),M.Y(c.pointer,b.y),s(d.background,b.x),a.hue(b.x).saturation(1-b.y)},z:function(a,b,c,d){return M.Y(d.pointer,b),a.lightness(1-b)}}),O._extras={},O.registerExtra=function(a,b){a in O._extras&&console.warn('Extra "'+a+'"has been registered already!'),O._extras[a]=b};for(var Q in N)O.registerExtra(Q,N[Q]);return O});